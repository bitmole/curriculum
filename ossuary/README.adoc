This is a proof of concept for generating metadata from an
AsciiDoc (or adoc) files containing Bootstrap curriculum content.
For now, only the glossary is treated, but the idea can be
extended straightforwardly to standards, materials, and
preparations (the three other metadata I found by inspection).

== Requirements

We need Asciidoctor, a Ruby program, to generate HTML from
AsciiDoc. (The format is AsciiDoc, the program that converts it
is Asciidoctor.)

To install this,

  sudo apt-get install asciidoctor

on Linux machines, and

  brew install asciidoctor

on macOS.

You need Racket, to do the metadata munging. Any version should
do. I’m using very conservative Racket.

== Example file and config

The sample adoc file used is `example.adoc`. It has a single
title (marked by a line starting with a `=`, followed by
space(s), followed by header, and multiple subsections (which are
marked by a line starting with `==`).

Phrases in the text that are to be glossarized are marked by
`@vocab{glossary item}`, as in the original Scribble file.

The master glossary file is `glossary-terms.rkt`, same as in
`curr`.

Adoc files like `example.adoc` are typically generated by
curriculum authors on a text editor of their choice, following
some basic guidelines for sectioning and metadata identification.
Some additional guidance may be required for specifying emphasis,
tables, listings, if the comprehensive Asciidoctor manual
(available online) is deemed too much. In any case, the
significant hurdle compared to generating content via GoogleDocs
is gaining comfort writing lightly marked up text using a text
editor. I’m just repeating salient points discussed after a phone
discussion with Emmanuel, which had me starting from scratch. If
you recall, the original tentative proposal (Washington DC, with
Kathi, Jen, Ed) was to use GoogleDocs throughout for leaf
document files. Emmanuel felt this would sacrifice a lot lot in
terms of maintainability, consistency, and professionalism of
“look”.

The goal is still a very (very!) low barrier to generating and
editing content (so, no Scribble, but the author still needs to
learn a text editor), but also a decent degree of programmability
for the repo maintainer(s): maintenance of metadata integrity,
ease of generation, professional look (so no GoogleDocs).

== Quick run

The script `build` will create an HTML file for every
`*.adoc` file in the `lessons/algebra/langs/en-us/` subdirectory. These HTML files are
created in a `distribution/lessons/algebra/langs/en-us/` subdirectory (created if not already
there).

== Running it

The Racket script `shared/langs/en-us/adoc-preproc.rkt` takes one or more adoc
filenames
as argument (`example.adoc`, `example2.adoc`) and generates the corresponding HTML
(`example.html`, `example2.html`), with the metadata (glossary) inserted,
plus a `summary.html` containing all the glossary items in all
the input files.

  adoc-preproc.rkt example.adoc example2.adoc

View `example.html`, `example2.html`, `summary.html` in any browser.
