= Combinations and Permutations

++++
<style>
  .big {font-size: 1.5rem;}
</style>

<!--

Visme URLs for tree diagrams: 
- https://my.visme.co/view/8rerg1ee-owplnmrj103m2zd6
- https://my.visme.co/view/epd0w63y-3ezl33jmxnyql0q1
-->
++++

@lesson-description{Students compute the possible number of outcomes using combinations and permutations.}

[@lesson-intro-table]
|===
@prereqs-stds{alg-defining-functions}
| Lesson Goals
| Students will be able to...

* 
* 
* 

| Student-facing Lesson Goals
|

* 

| Materials
|[.materials-links]
* @link{TODO, Lesson Slides}

@material-links

| Preparation
|
* Make sure all materials have been gathered
* Decide how students will be grouped in pairs
* Computer for each student (or pair), with access to the internet
* link:{pathwayrootdir}/workbook/workbook.pdf[Student workbook], and something to write with

| Supplemental Resources
| 

@include{xtra/lang-prereq.adoc}
|===

== Permutations

=== Overview
Students are introduced to the concept of @vocab{permutations}, both with and without replacement. They learn the definition and compute a number of permutations by hand using tree diagrams, then learn the formula for computing permutations (with and without replacement).

=== Launch
@span{.right}{@image{images/pizza.png}}
Luigi's Family Restaurant is about to open, and it's going to be the hottest restaurant in town. They have a menu with six different dishes, and they plan to offer a four-course "Tour of Italy" dinner for the low-low price of $9.95 per person. The gimmick is that diners can __choose the order of the courses:__ you might start with lasagna, but your friend can start with the chicken parmesan, and so on. And if your friend happens to really, *really* like chicken parmesan, they can choose to eat it for all four courses!

They advertise "an almost-endless number of dining experiences". In fact, Luigi himself guarantees free food for life for anyone who can eat every possible configuration. If you ate dinner there every night, how long would it take to try each one? In other words, __how many ways can you reshuffle those four courses__?

[.lesson-point]
In Permutations, order matters!

Luigi isn't going to give away free food just because you order four courses - he wants you to order four courses _in every possible order_! In situations where order matters, the set of possible options is called @vocab{permutations}. 

[.lesson-point]
With or without replacement?

In some restaurants, you're not allowed to order the same item for more than one course. In other words, __once you've picked lasagna, it's no longer on the menu for your next course!__ This is called *permutation _without_ replacement*.

Luigi is a nice guy, so once you order lasagna it is "replaced" with the option to order it again for the next course! This is called *permutation _with_ replacement*.

With six dishes to choose from and four courses to eat, how many @vocab{permutations} are there? How many meals would we have to eat, to get free food for life?

=== Investigate

==== Permutation with Replacement

[.lesson-instruction]
--
Luigi has six possible dishes to choose from.

- How many permutations could there be for a 1-course dinner?
- How many permutations could there be for a 2-course dinner?
- How many permutations could there be for a 3-course dinner?
- Is there a pattern here?
--

Have students discuss.

It's useful to use __tree diagrams__, so we can see what our possible choices are.

Let's diagram the permutations for a 1-course meal. With six menu items, a 1-course meal could be Lasagna, Pizza, Chicken, etc.... That means the set of all possible 1-course @vocab{permutations} has six different meals. In less than a week, we'd have tried all the possibilities!

@span{.center}@image{images/6-1-course-permute-w-replacement.png}

But what about a 2-course meal? Each of our 1st-course choices has __another tree__ underneath it! After we've picked our first course, how many options do we have for the second? Remember: the meal we picked for the first course has been "replaced", so we still have six more choices in our bag.

@span{.center}@image{images/6-2-course-permute-w-replacement.png}

Now we can choose Lasagna for our first course....and then Lasagna _again_, or Pizza, Chicken, Veal, Soup, or Ziti. Each time we make a choice, there are six new possibilities. Instead of taking six days to try all the permutations, now it takes __36 days__ - more than a month!

Every time we get to make a choice, each endpoint in our tree sprouts six more branches. 

[.lesson-instruction]
How many permutations would there be in a 3-course meal?

We had 36 possible 2-course meals, so choosing a third course means that each "endpoint" of our 2-course meal tree now has six possible branches! @math{6 \times 6  \times 6 = 6^3 = 216} possible 3-course meals.

For a 4-course meal, we have a _four-level_ tree with six branches at every level! That's @math{6 \times 6 \times 6 \times 6} - or @math{6^4} possible permutations!

The number of @vocab{permutations} is computed based on two things:
. The number of possible menu __items__ (lasagna? chicken? soup?)
. How many times we get to __choose__. (1-course meal? 3-course meal?)

Let's see this as a function:

[.big]
@math{permute\mbox{-}w\mbox{-}replace(items, choose) = choose^{items}}

@math{permute\mbox{-}w\mbox{-}replace(6, 1) = 6^{1} = 6}
We have 6 possible one-course meals...


@math{permute\mbox{-}w\mbox{-}replace(6, 2) = 6^{2} = 36}
We have 36 possible two-course meals...

@math{permute\mbox{-}w\mbox{-}replace(6, 3) = 6^{3} = 216}
We have 216 possible three-course meals...

How many permutations are there for a 4-course meal chosen from Luigi's 6-item menu?

@math{permute\mbox{-}w\mbox{-}replace(6, 4) = 6^{4} = 1296}

With four courses, it would take more than __3.5 years__ to try them all -- if we ate dinner at Luigi's every night!

==== Permutation without Replacement

After a few months, Luigi realizes that he's losing money. He could either raise his prices, or streamline the cooking process. His daughter observes that there's no way to predict how many ingredients to buy, since some people might want four courses of soup and others might want four courses of ziti. Without being able to predict the ingredients, Luigi winds up buying too much of one thing and not enough of another - resulting in a lot of wasted food and unhappy customers!

Luigi proposes an important change to his "Tour of Italy deal": **No item can be ordered twice.**

He also decides to simplify his menu even further, down to just **four different options**.

That way no one can order four of the same thing, and there's far fewer choices to make! This makes it a lot easier to predict what to buy, so it will waste less food and save Luigi a lot of money.

Now how long would it take to try every permutation?

Let's start by drawing the tree diagram for 1st place:

@span{.center}@image{images/4-1-course-permute-wo-replacement.png}

Now there are *four* possible items we could eat for our first course, so we have 4 possible branches. After we eat that course, it's time to order the second course! How many branches are there for the second course, under each first course choice?

@span{.center}@image{images/4-2-course-permute-wo-replacement.png}

Now there are only _three_ possible items, since we can't order the same thing twice. This is called @vocab{permutation} *without replacement*. Now there are only @math{4 \times 3 = 12} permutations, instead of the 16 we'd have with replacement.

We can visualize our four courses as a four-level tree, with each set of branches getting smaller and smaller until there's only one option left. In the tree diagram below, you can see a _partial_ drawing of all four courses.

@span{.center}@image{images/4-4-course-permute-wo-replacement.png}

We can compute the number of permutations-without-replacement with the factorial function. @math{4 \times 3 \times 2 \times 1 = 4! = 24}

Now we could try all the permutations in just under a month!

**Luigi decides this makes it too easy, and now that his kitchen is running smoothly he decides to bring back the original six-item menu.**

In this situation, there might be six items on the menu, but we want to __stop multiplying after the first four items are chosen__.

@math{6 \times 5 \times 4 \times 3 = 360} 

We can write this by starting with our factorial notation from before (where every number from 6 to 1 is multiplied), and then "undoing" the @math{2 \times 1}. This takes the form of __dividing__:

@math{\frac{6 \times 5 \times 4 \times 3 \times 2 \times 1}{2 \times 1} = \frac{6!}{2!} = 360}

With this number of possible combinations, it would take a little more than a year try them all! And with less wasted food and a faster kitchen, Luigi has a lot of happy customers and a lot of money in the bank.

We can write this relationship as a function:

[.big]
@math{permute\mbox{-}no\mbox{-}replace(items, choose) = \frac{items!}{(items - choose)!}}

[.lesson-instruction]
For practice, complete the @opt-printable-exercise{permutation.adoc} worksheet.

=== Synthesize

- What is the difference between permutation with or without replacement?

- What are some real-world examples of each?

== Combinations

=== Overview
Students are introduced to the concept of @vocab{combinations}. They learn the definition and compute a number of combinations by hand using tree diagrams, then learn the formula for computing combinations.

=== Launch
With this new set of rules, Luigi's Family Restaurant is more popular than ever! But with a full house every night, the cooks are busy and the kitchen gets backed up. Customers start complaining about slow service, and Luigi is once again in trouble.

The cooks point out that it's easy to add twice as much ravioli to the same pot - but it's hard to make two _separate_ pots of ravioli. If people could choose their four courses in advance, the chefs could just make a few huge batches of each item and divide them up on people's plates!

Luigi decides to change the rules again, to help his kitchen staff. There are still six items on the menu, customers can still choose any four they want, and they still can't choose the same item twice...but **order no longer matters**. Instead of a four-course meal, diners get a "combination platter" with all four items on the plate.

[.lesson-instruction]
--
- How is this situation similar to the permutation questions?
- How is it different?
--
Let students discuss.

=== Investigate

When order _doesn't_ matter, all the possible options are called @vocab{combinations} (think of Luigi's "combination platter!"). 

Since there's no replacement, let's start by using our formula for permutation-without-replacement to compute all the possible permutations:

@math{permute\mbox{-}no\mbox{-}replace(6, 4) = \frac{6!}{(6 - 4)!} = \frac{6!}{2!} = 360}

In this situation, the order __doesn't matter__, so some of these platters are going to be the same combination: L-S-Z-C is a different @vocab{permutation} from L-S-C-Z, but it's the same @vocab{combination}! If we knew that every combination would have a duplicate, we'd divide the number of platters by two. If we knew each one would have a triplicate, we'd divide by three. 

[.lesson-instruction]
How do we compute the number of duplicates in a four-course platter?

We already know how to do this! This is the same question as "how many permutations are there for the same four courses?" So let's use our formula for permutation without replacement: @math{\frac{4!}{4-4!} = 4! = 24}

So we have one function that will tell us how many __permutations-without-replacement__ there are for 4 courses out of six items, and we need to divide this by the number of __permutations-without-replacement__ there are for exactly four courses.

@math{combinations(6, 4) = \frac{6!}{(6 - 4)!} \div 4! = 360 \div 24 = 15}

We can rewrite this using our functions from earlier:

@math{combinations(items, choose) = \frac{permute\mbox{-}no\mbox{-}replace(items, choose)}{permute\mbox{-}no\mbox{-}replace(choose, choose)}}

In this situation, we have 6 possible choices and we get to choose 4 times:

@math{combinations(6, 4) = \frac{permute\mbox{-}no\mbox{-}replace(6, 4)}{permute\mbox{-}no\mbox{-}replace(4, 4)}}

[.lesson-instruction]
Complete the @opt-printable-exercise{combination.adoc}, and @opt-printable-exercise{combination-or-permutation.adoc} worksheets

=== Synthesize

- What is the difference between @vocab{combination} and @vocab{permutation}? 

- What are some real-world examples of combinations?

== Additional Exercises:
TODO