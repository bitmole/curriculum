= Visualizing Relationships

@lesson-description{Students investigate scatter plots as a
method of visualizing the relationship between two variables, and
begin searching for correlations in their dataset.}

[.left-header,cols="20a,80a",stripes=none]
|===
@prereqs-stds{ds-advanced-analysis}
|Product Outcomes
|Students describe correlations in

* the animal dataset
* their chosen dataset

@worksheet-include{ds-questions-n-defs/xtra/lang-prereq.adoc}
|===

== Introduction (Time 15 minutes)

Why are some animals adopted quickly, while others take a long
time? What factors explain why one pet gets adopted right away,
and others wait months?

////
Ask the class for theories.
////

[.lesson-point]
Theory 1: Smaller animals get adopted faster because they’re
easier to care for.

How could we test that theory? Bar and pie charts are great for
showing us how the frequency of a categorical column. Histograms
and box plots are great for showing us the shape and distribution
of a quantitative column. But none of these displays will help us
see connections between two columns.

[.lesson-instruction]
Take a few minutes to look through the whole dataset, and see if
you agree with the statement. Could any of our visualizations or
measures of center help us answer this question? Write down your
hypothesis on
@worksheet-link{workbook-pages/disproving-claim.adoc}, and how we
could use this dataset to see if you’re right.

////
Encourage students to discuss openly before writing.
////

We’ve got a lot of tools in our toolkit that help us think about an entire _column_ of a dataset:
- We have ways to find measures of center and spread for a given column.
- We have visualizations that let us see the shape of values in a
  quantitative column.
- We have visualizations that let us see the frequencies a
  categorical column.

What column is this question asking about?

////
Use this as an opportunity to review what these measures and
visualizations are. Redirect students back to their contracts
page! Point out that this question is asking about both pounds
and weeks.
////

This question is asking about _two columns_ in our dataset.
Specifically, it’s asking *if there is a relationship* between
pounds and weeks. Fortunately, there are other tools that let us
visualize a relationship between two quantitative columns!

////
If time allows, ask students how we might visualize this
relationship.
////

[.lesson-instruction]
Open your “Animals Starter File”. (If you do not have this file,
or if something has happened to it, you can always make a
@link{https://code.pyret.org/editor#share=1gaYAyYhvlKBm6VJuvJDcnoINBw76pL-L,
new copy}.)

For each animal in the shelter, there are two data points we care
about: how many `pounds` they weigh, and the number of `weeks` it
took to be adopted. We can use these points to plot each animal
as a point on the x- and y-axes. Eventually, we’ll have a whole
cloud of points, which show us the relationship between the two
columns for all the animals at the shelter.

[.lesson-instruction]
Complete
@worksheet-link{workbook-pages/creating-scatterplot.adoc} in your
Student Workbook.

////
Suggestion: divide the full table up into sub-lists, and have a
few student plot 3-4 animals on the board. This can be done
collaboratively, resulting in a whole-class scatterplot!
////

== Scatter Plots (Time 30 minutes)

Here’s the contract for Pyret’s scatter-plot function, as well as
an example of a scatter plot that examines the relationship
between weight and adoption time. Notice that the contract is
written as a comment -- the `#` symbol means it’s just a note for
humans.  

----
# scatter-plot :: (t :: Table, labels :: String, xs :: String, ys :: String) -> Image
scatter-plot(animals-table, "name", "pounds", "weeks")
----


[.lesson-instruction]
Try making a few scatter plots, looking for relationships between columns in the animals-table.

[.lesson-point]
Theory 2: Younger animals get adopted faster because they are
cuter.

But cats, dogs, rabbits and tarantulas have very different
lifespans! A 5-lear-old tarantula is still really young, while a
5-year-old rabbit is fully grown. With differences like this, it
doesn’t make sense to put them all on the same scatter plot. To
do this analysis, we might have to make several displays, each
for a different subset.

@span{.right}{@image{images/visualizing-relationships-1.png, "",
400}}

Now that we have our scatter plot, what kind of patterns do we see?

[.lesson-instruction]
- Can you see a “cloud” around which the points are clustered?
- Are there places where the “cloud” is denser than others?
- Does the number of weeks to adoption seem to go up or down as the age increases?
- Are there any points that “stray from the pack”? Which ones? 

////
Suggestion: project the scatter plot at the front of the room,
and have students come up to the plot to point out their
patterns.
////

If we see a straight-line pattern in the cloud of scatter plot
points, this suggests the variables could be related in a certain
way. Do the two variables’ values tend to increase or decrease
together, or does one go down as the other goes up? We’d also
like to know if one variables tells us a lot or a little about
the other’s values. A single number called a @vocab{correlation} can
provide us with both pieces of information.

In this case, we’re looking for a correlation between `pounds` and
`weeks`. This relationship can be graphed as a line, which tries to
cut through the “middle” of the cloud. This line is called the
@vocab{line of best fit}, and it turns out to be really useful for making
predictions. For example, we can use the line to predict how long
a new dog would wait at the shelter, if the dog weighs 68 pounds.

Do you notice any data points that seem unusually far away from
the line? Which animals are those? These points are called
@vocab{outliers}, meaning that there is something special about them that
makes them different from everyone else.

[.lesson-instruction]
Why might these animals be outliers?

////
Give students a chance to come up with a few ideas, and share them with the class.
////

Outliers are always interesting:

- Sometimes they’re just random. Maybe Felix just met the right
  family early, or maybe we find out he lives nearby, got lost
  and his family came to get him. In that case, we might need to
  do some deep thinking about whether or not it’s appropriate to
  remove him from our dataset.

- Sometimes they can give you a deeper insight into your data.
  Maybe Felix is a special, popular breed of cat, and we discover
  that our dataset is missing an important column for breed!

- Sometimes outliers are the points we are looking for! What if
  we wanted to know which restaurants are a good value, and which
  are rip-offs? We could make a scatterplot of restaurant prices
  vs. reviews, an outlier that’s high above the rest of the
  points would be a restaurant whose reviews are _unusually good_
  for the price. An outlier way below the cloud would be a really
  bad deal.

[.lesson-instruction]
For practice, try making scatter plots for each of the following
relationships. If you see any outliers, try to explain them!
- The `age` of an animal vs the `pounds` of the animal
- The `legs` of an animal vs the number of `weeks` to be adopted
- The `age` vs the number of `legs` it has.

////
Debrief, showing the plots on the board. Make sure students see
plots for which there is no relationship, like the last one!
////

Of course, it might not make sense to group different animals
together in one plot! What if we wanted to see the relationship
between age and weeks for just the dogs in our database?

Try making scatter plots for that relate age to weeks, for each
of the subsets you’ve defined from the animals table. Does the
relationship appear stronger in some of the subsets than others?
Why?

== Correlations and Predictions (Time 40 minutes)

[.lesson-point]
Correlations have direction.

- A _positive correlation_ means that the variable on the y-axis
  increases as the variable on the x-axis goes up. For example,
  “the older the animal, the more weeks it generally takes to get
  adopted”.

- A _negative correlation_ means that the variable on the y-axis
  decreases as the variable on the x-axis goes down. For example,
  “the longer an animal is at the shelter, the less they
  generally weigh”. 

Do you see a correlation in the pounds-vs-weeks scatter plot? If
so, is it positive or negative? What correlations, if any, did
you see in the other scatterplots you created?

You’ve already learned three ways to find the “center” of a
dataset in one dimension: the mean, the median and the mode all
represent a way to collapse a bunch of points on a number line
into a single, summary number. If the “center” of points on a
number line is a single point, what is the “center” of points in
a _two-dimensional_ cloud, which cluster around a line?

What we need to do is find a _line_ -- called a @vocab{line of
best fit}, or a “regression line” -- that is at the center of
this cloud. Each point exerts a little bit of “pull” on the line,
with points above the line yanking it up and points below the
line dragging it down. Points that are really far away -- our
@vocab{outliers} and our influential observations -- pull the
line harder than those that are close to the line. The slope of
the line will be positive or negative depending on whether or not
the correlation is positive or negative. Given a value on the
x-axis, this line allows us to “predict” what the corresponding
value on the y-axis might be. This allows us to make inferences
about a population, based on a sample of that population.

[.lesson-instruction]
Turn to @worksheet-link{workbook-pages/drawing-predictors.adoc},
and do your best to draw a @vocab{line of best fit} through each of the
scatter plots on the left.

[.lesson-point]
Correlations have _strength_.

- If the cloud is tightly packed, there is a _strong correlation_.
- If the cloud is loosely scattered, there is a _weak correlation_.
- If the points are all over the place, with no tendency to rise
  or fall from left to right, there may be _no correlation_. 

[.lesson-instruction]
For each line you drew on
@worksheet-link{workbook-pages/drawing-predictors.adoc},
determine the direction and strength of the correlation by
circling the words that describe it.

[.lesson-point]
Correlation does NOT imply causation.

If two quantities are _correlated_, it doesn’t mean that one _causes_
the other! For example, a study found that there is a strong
correlation between the number of people who become tangled in
their own bedsheets each year is correlated with the amount of
cheese consumed that year. It happens that both of those values
have been increasing over the past decade, but there is no causal
relationship between them!

What correlations do you think there are in your dataset? Would
you like to investigate a subset of your data to find those
correlations?

[.lesson-instruction]
Brainstorm a few possible correlations that you might expect to
find in your dataset, and make some scatter plots to investigate.

////
Have students share back their correlations, and why they expect
to find them.
////

[.lesson-instruction]
Turn to
@worksheet-link{workbook-pages/correlations-in-my-dataset.adoc},
and list three correlations you’d like to search
for.

== Closing (Time 10 minutes)

After looking at the scatter plot for our animal shelter, do you
still agree with the claim on
@worksheet-link{workbook-pages/disproving-claim.adoc}? Perhaps
you need more information, or to see the analysis broken down
separately by animal.

You’ve started to look for correlations in your dataset, and now
you know how to create scatter plots to visualize them. But how
do we know if a correlation is strong enough to be useful?
Eyeballing charts isn’t good enough! In the next Unit, you’ll
learn how to calculate a correlation, and get a feel for strength
of a relationship based on a single number. You’ll investigate
the correlations in your research that you mapped out here.

