= Defining Values

@lesson-description{Students learn how to define names for computed values. These names can be used repeatedly in different situations, jusr as they are in variable in math.}

[@lesson-intro-table]
|===
@prereqs-stds{alg-function-composition}
| Lesson Goals
| Students will be able to:

* Demonstrate understanding of @vocab{variable}s and why they are useful in math and programming

| Student-facing Goals
|
* I can define names for @vocab{values}, generated by computed expressions.
* I can use my defined values in different situations.

| Materials
|[.materials-links]

@ifproglang{wescheme}{
* @link{https://docs.google.com/presentation/d/1m26CH8tN6Evrhfc8CFGfd8M4i0LIxskcVOpDdwkzsjo/, Lesson Slides}
}
@ifproglang{pyret}{
* @link{https://docs.google.com/presentation/d/1aRWudr6vp9KG3xiIaV_IDRSV2e3it3BOT60jVMJDnGc/edit, Lesson Slides}
}

@material-links


| Preparation
|
* Make sure all materials have been gathered
* Decide how students will be grouped in pairs

| Key Points For The Facilitator
|
* Learning how to define values is a big milestone! It will be used consistently throughout other lessons, so be sure to give students plenty of time to practice this new skill.
* Check frequently for understanding of @vocab{data types} and @vocab{contract}s during this lesson and throughout subsequent lessons.

* Students will use their Contracts page frequently, so it should be kept in an accessible, convenient location.

@lang-prereq

|===

[.old-materials]
Click here to see the @link{https://www.bootstrapworld.org/materials/spring2020/courses/algebra/en-us/units/unit3/index.html, prior unit-based version}.

== What's in Common? @duration{30 minutes}

=== Overview
This activity introduces the problem with duplicate code, leveraging *Mathematical Practice 7 - Identify and Make Use of Structure*. Students identify a common structure in a series of expressions, and discover how to bind that expression to a name that can be re-used.

=== Launch

Take a look at the expressions below:

@ifproglang{wescheme}{

```
(star 50 "solid" "green")
(scale 3 (star 50 "solid" "green"))
(scale .5 (star 50 "solid" "green"))
(rotate 45 (star 50 "solid" "green"))
(rotate 45 (scale 3 (star 50 "solid" "green")))
```

- *What code do they all have in common?*
`(star 50 "solid" "green")`
}

@ifproglang{pyret}{
```
star(50, "solid", "green")
scale(3, star(50, "solid", "green"))
scale(0.5, star(50, "solid", "green"))
rotate(45, star(50, "solid", "green"))
rotate(45, scale(3, star(50, "solid", "green")))
```

- *What code do they all have in common?*
`star(50, "solid", "green")`
}

- *What would happen if you were asked to change the color of all the stars to gold?*
_We'd have to change it everywhere it appeared._

[.lesson-point]
Duplicate code is almost always bad!

There are lots of potential problems with duplicate code:

- *Readability:* The more code there is, the harder it can be to read.
- *Performance:* Why re-evaluate the same code a dozen times, when we can evaluate it _once_ and use the result as many times as we need?
- *Maintainability:* Suppose we needed to change the size of the stars in the examples above. We would have to make sure every line is changed, which leaves a lot of room for error.

Since we're using that star over and over again, wouldn't it be nice if we could define a "nickname" for that code, and then use the nickname over and over in place of the expression? And then, if we wanted to change something about all of the stars, we would only have to make the change once, in the definition.

--
You already know how to do this in math: 

[.indentedpara]
@math{x = 4} _defines_ the nickname @math{x} to be the value 4. 
--

@ifproglang{wescheme}{
--
WeScheme uses the word "define" to make this even clearer! 

[.indentedpara]
We can type `(define x (4))` to define `x` to be the value 4.
--
}

@ifproglang{pyret}{
--
Pyret is no different! 

[.indentedpara]
We type `x = 4` to define `x` to be the value 4.
--
}

Once we've defined `x` to be the value 4 and clicked "run", anytime we use `x`, the computer will remember that it is _defined_ as 4.  We can _use_ that definition to get an answer. For example, @math{x + 2} will evaluate to 6.

Of course, the whole point of defining a value is so that it sticks around and can be used later! That's why programmers put their definitions on the _left-hand side_, known as the @vocab{Definitions Area}.

=== Investigate



[.lesson-instruction]
- Open the @ifproglang{wescheme}{@online-exercise{https://www.wescheme.org/view?publicId=Dus6Kaigy6, Defining Values Starter File}} @ifproglang{pyret}{@online-exercise{https://code.pyret.org/editor#share=1dmCVwizoarLFep2-WkCH0PQKacB3MSql&v=04918ef, Defining Values Starter File}} and complete the notice and wonder exercise on @printable-exercise{pages/defining-values-explore.adoc} with your partner. 
- Complete the remaining questions and add some defintions of your own in the definitions area. Be sure to click *Run* again before you try testing them out.

=== Synthesize

- *What data types can we define values for?*
_All of them - Number, String, Image_

- What values did you decide to define? When might they be useful?


[.strategy-box, cols="1", grid="none", stripes="none"]
|===
|
@span{.title}{Support for English Language Learners}

MLR 8 - Discussion Supports: As students discuss, rephrase responses as questions and encourage precision in the words being used to reinforce the meanings behind some of the programming-specific language, such as "define" and "value".
|===

== Using Defined Values

=== Overview
Now that we know _how_ to define values, we'll think about when it would be useful to define them and how to use them once we have.

=== Launch

Have students turn to @printable-exercise{pages/which-value-to-define.adoc} and work with their partners to identify which element(s) in the flags pictured they would want to define before composing the images.


[.lesson-instruction]
How did you decide what you would want to define?

=== Investigate

[.lesson-instruction]
--
- Now that we know a) how to define a value and b) when it might be useful to define a value, let's take a look at how to use defined values in our code.
- Type @show{(sexp->code `(radial-star 30 20 50 "solid" "yellow"))} into the @vocab{Interactions Area} and decide on a nickname for the image. _sun_

@ifpathway{algebra, ok}{
Have students turn to @printable-exercise{pages/coe-why-define-values.adoc}	
}

- Using the nickname @ifpathway{algebra, ok}{, @show{(sexp->code `sun)}}, define a value  in your @vocab{Definitions Area} @show{(sexp->code `(define sun (radial-star 30 20 50 "solid" "yellow")))}
- Use the value you defined to write the code to scale the image to be 3 times as large. @show{(sexp->code `(scale 3 sun))}
--

=== Synthesize

- *Why is defining values useful?*
_Lets the programmer reuse code, saves time, lets the programmer make changes easily, allows us to more easily use elements inside other functions_

== Cleaning Up Code @duration{20 minutes}

=== Overview
This activity is a chance to _play_ with new concepts, combining value definitions and function composition to create new shapes or to clean up code that generates shapes. The engaging nature of the activity is designed to motivate lots of experiments, each of which gives students a chance to practice applying those concepts.

=== Launch
The ability to define values allows us to look for - and make use of - structure in our code or in our equations. What structure is repeated in this expression? 

@span{.center}{@math{(x + 1)^2 - \frac{4}{(x + 1)} \times -2(x + 1)}}

=== Investigate
Have students open the 
@ifproglang{wescheme}{@online-exercise{https://www.wescheme.org/openEditor?publicId=c5SB38KcVD, Chinese flag starter file.}
}
@ifproglang{pyret}{@online-exercise{https://code.pyret.org/editor#share=1qUY9u9j_NfZM8PJwT9QKJKNlD3RPbSDE, Chinese flag starter file}
} 

. This file uses a function students haven't seen before! What is it? 
. What is it its contract?
. Have them change the color of all the stars from yellow to black
. Have them identify what structure is repeated
. Have them use a value definition to simplify the code
. Have them change the stars from black back to yellow

*Optional* (for a longer time commitment):
Have students choose a flag from this list of images: @opt-printable-exercise{pages/flags-of-the-world-resource.pdf, Flags of the World}, and recreate one (or more!) of the flags using `define` and any of the other functions they've learned so far.

=== Synthesize
How many reasons can students come up with for why defining values is useful?

== Defining Values @duration{20 minutes}

=== Overview
Students learn how to define values in Pyret (note that these definitions work the way variable substitution does in math, as opposed to variable assignment you may have seen in other programming languages).

=== Launch
Pyret allows us to define names for values using the `=` sign. In math, you’re probably used to seeing definitions like _x = 4_, which defines the name x to be the value 4. Pyret works the same way, and you’ve already seen two names defined in this file: `shelter-sheet` and `animals-table`. We generally write definitions on the left, in the Definitions Area. You can add your own definitions, for example:

  my-name = "Maya"
  sum = 2 + 2
  kittens-are-cute = true

[.lesson-instruction]
--
With your partner, take turns adding definitions to this file:

- Define a value with name `food`, whose value is a String representing your favorite food
- Define a value with name `year`, whose value is a Number representing the current year
- Define a value with name `likes-cats`, whose value is a Boolean that is `true` if you like cats and `false` if you don’t
--

=== Synthesize
Why is it useful to be able to define values, and refer to them by name?

== Additional Exercises:

@ifpathway{algebra, ok}{
* @printable-exercise{pages/writing-code-using-defined-values.adoc}
}

