= Plotting and Displaying Data

@lesson-description{Students learn to apply functions to entire Tables, generating pie charts and bar charts. They then explore other plotting and display functions that are part of the Data Science library.}

[@lesson-intro-table]
|===
@prereqs-stds{ds-operators-functions}
|Lesson Goals
|Students will be able to:

* Explain the difference between pie and bar charts
* Generate pie and bar charts (among others) from the animals dataset

| Materials
|
* Computer for each student (or pair), with access to the
internet
* link:{pathwayrootdir}/workbook/workbook.pdf[Student workbook], and something to write with

|===

== Introduction (5 min)
[.lesson-instruction]
Have you ever seen any pictures created from tables of data? Can you think of a situation when you’d want to consume a _Table_, and use that to produce an image?

== Making Plots and Displays (10 min)
The library included at the top of the file includes some helper functions that are useful for Data Science, which we will use
throughout this course. Here is the contract for a function that does just that, and an example of using it:

----
# pie-chart :: (t :: Table, col :: String) -> Image
pie-chart(animals-table, "gender")
----

[.lesson-instruction]
- What is the Name of this function?
- How many inputs are in its Domain?
- In the Interactions Area, type `pie-chart(animals-table, "species")` and hit Enter. What happens? 

Hovering over a pie slice or bar reveals the value or percentage of the whole, and the label. We can also resize the window by dragging its borders. This allows us to experiment with the data before closing the window and generating the final, non-interactive image.

The function `pie-chart` consumes a Table of data, along with the _name of a categorical column you want to display_. The computer
will go through the column, counting the number of times that each value appears. It will then create a pie slice for each
value, with the size of the slice being the percentage of times it appears. In this example, we used our `animals-table` table as
our dataset, and made a pie chart showing the distribution of `species` across the shelter.

Here is the contract for another function:

----
# bar-chart :: (t :: Table, col :: String) -> Image
----

[.lesson-instruction]
- Which column of the animals table tells us whether an animal is male or female?
- Use `bar-chart` to make a display showing the number of female animals at the shelter.
- Do you think we could use any column? What about a quantitative column?
- Experiment with these two functions, passing in different column names for the label and data columns. If you get an error message, _read it carefully!_ 
- What do you think are the rules for what kinds of columns can be used by _bar-chart_ and _pie-chart_?

== Exploring other plots (Time 30 minutes)

There are _lots_ of other functions, for all different kinds of charts and plots. Even if you don’t know what these plots are for yet, see if you can use your knowledge of Contracts to figure out how to use them. What do you think they mean?

- How many columns are needed to make a `histogram`?
- Are histograms made from quantitative or categorical columns?
- What do you think a `histogram` tells us about the data?
- How many columns are needed to make a `box-plot`?
- Are ``box-plot``s made from quantitative or categorical columns?
- What do you think a `box-plot` tells us about the data?
- Can you answer the same questions for other plots?

Sometimes we want to summarize a categorical column in a Table, rather than a pie chart. For example, it might be handy to have a table that has a row for dogs, cats, lizards, and rabbits, and then the count of how many of each type there are. Pyret has a function that does exactly this! Try typing this code into the Interactions Area: `count(animals-table, "species")`

What did we get back? `count` is a function that consumes a table and the name of a categorical column, and produces a _new table_ with exactly the columns we want: the name of the category and the number of times that category occurs in the dataset. What are the names of the columns in this new table?

[.lesson-instruction]
- Use the `count` function to make a table showing the number of animals of each `gender` at the shelter.
- Use the `count` function to make a table showing the number of animals that are `fixed` (or not) at the shelter.

Sometimes the dataset we have is _already_ summarized in a table like this, and we want to make a chart from _that_. In this situation, we want to use the raw values in the summary table as-is: the size of the pie slice or bar is taken directly from the `count` column, and the label is taken directly from the `value` column. When we want to use the raw values as-is, we have another function:

----
# pie-chart-raw :: (t :: Table, label :: String, data :: String) -> Image
pie-chart-raw(count(animals-table,"species"), "value", "count")
----

[.lesson-instruction]
Type this in and try it out. How would you make a bar chart based on the raw data?

== Closing (Time 5 minutes)

Today you’ve added more functions to your toolbox. Functions like `pie-chart` and `bar-chart` can be used to visually display data, and even transform entire tables!

You will have many opportunities to use these concepts in this course, by writing programs to answer data science questions.

[.lesson-instruction]
Make sure to save your work, so you can go back to it later!

== Additional Exercises:

TODO